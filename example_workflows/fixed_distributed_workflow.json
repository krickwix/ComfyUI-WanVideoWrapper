{
  "id": "fixed-distributed-workflow",
  "revision": 0,
  "last_node_id": 60,
  "last_link_id": 70,
  "nodes": [
    {
      "id": 1,
      "type": "WanDistributedConfig",
      "pos": [100, 100],
      "size": {"0": 300, "1": 400},
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": {
        "world_size": 1,
        "rank": 0,
        "backend": "nccl",
        "use_fsdp": false,
        "use_context_parallel": false,
        "ulysses_size": 1,
        "ring_size": 1,
        "t5_fsdp": false,
        "dit_fsdp": false,
        "use_usp": false,
        "t5_cpu": false,
        "param_dtype": "bfloat16",
        "reduce_dtype": "float32",
        "buffer_dtype": "float32",
        "sharding_strategy": "FULL_SHARD",
        "sync_module_states": true
      },
      "properties": {},
      "widgets_values": [
        1, 0, "nccl", false, false, 1, 1, false, false, false, false, "bfloat16", "float32", "float32", "FULL_SHARD", true
      ]
    },
    {
      "id": 2,
      "type": "WanDistributedModelLoader",
      "pos": [500, 100],
      "size": {"0": 300, "1": 300},
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": {
        "model": "wan2.1_14b.safetensors",
        "base_precision": "bf16",
        "wan_distributed_config": ["WANDISTRIBUTEDCONFIG", 1],
        "attention_mode": "sdpa",
        "lora": null,
        "vace_model": null
      },
      "properties": {},
      "widgets_values": ["wan2.1_14b.safetensors", "bf16", "sdpa"]
    },
    {
      "id": 11,
      "type": "LoadWanVideoT5TextEncoder",
      "pos": [100, 600],
      "size": {"0": 317, "1": 130},
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": {
        "model_name": "umt5_xxl_fp16.safetensors",
        "precision": "bf16",
        "load_device": "offload_device",
        "quantization": "disabled"
      },
      "properties": {},
      "widgets_values": ["umt5_xxl_fp16.safetensors", "bf16", "offload_device", "disabled"]
    },
    {
      "id": 37,
      "type": "WanVideoEmptyEmbeds",
      "pos": [500, 600],
      "size": {"0": 272, "1": 126},
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": {
        "control_embeds": null,
        "extra_latents": null,
        "width": 832,
        "height": 480,
        "num_frames": 81
      },
      "properties": {},
      "widgets_values": [832, 480, 81]
    },
    {
      "id": 3,
      "type": "WanT2V",
      "pos": [900, 100],
      "size": {"0": 300, "1": 400},
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": {
        "model": ["WANVIDEOMODEL", 2],
        "wan_t5_model": ["WANTEXTENCODER", 11],
        "image_embeds": ["WANVIDIMAGE_EMBEDS", 37],
        "prompt": "A beautiful sunset over the ocean with waves crashing on the shore",
        "negative_prompt": "",
        "width": 832,
        "height": 480,
        "num_frames": 81,
        "num_steps": 50,
        "guidance_scale": 5.0,
        "seed": 42,
        "vram_management_args": null,
        "block_swap_args": null,
        "torch_compile_args": null,
        "feta_args": null,
        "tea_cache_args": null
      },
      "properties": {},
      "widgets_values": [
        "A beautiful sunset over the ocean with waves crashing on the shore",
        "",
        832,
        480,
        81,
        50,
        5.0,
        42
      ]
    },
    {
      "id": 6,
      "type": "WanVideoVAELoader",
      "pos": [500, 800],
      "size": {"0": 270, "1": 106},
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": {
        "model_name": "wan_vae.safetensors",
        "precision": "bf16"
      },
      "properties": {},
      "widgets_values": ["wan_vae.safetensors", "bf16"]
    },
    {
      "id": 28,
      "type": "WanVideoDecode",
      "pos": [1300, 100],
      "size": {"0": 270, "1": 198},
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": {
        "vae": ["WANVAE", 6],
        "samples": ["LATENT", 3],
        "enable_vae_tiling": false,
        "tile_x": 272,
        "tile_y": 272,
        "tile_stride_x": 144,
        "tile_stride_y": 128,
        "normalization": "default"
      },
      "properties": {},
      "widgets_values": [false, 272, 272, 144, 128, "default"]
    },
    {
      "id": 45,
      "type": "WanVideoVRAMManagement",
      "pos": [100, 1000],
      "size": {"0": 293, "1": 58},
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": {
        "offload_percent": 1.0
      },
      "properties": {},
      "widgets_values": [1.0]
    },
    {
      "id": 39,
      "type": "WanVideoBlockSwap",
      "pos": [500, 1000],
      "size": {"0": 281, "1": 154},
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": {
        "blocks_to_swap": 20,
        "offload_img_emb": false,
        "offload_txt_emb": false,
        "use_non_blocking": true,
        "vace_blocks_to_swap": 0
      },
      "properties": {},
      "widgets_values": [20, false, false, true, 0]
    },
    {
      "id": 35,
      "type": "WanVideoTorchCompileSettings",
      "pos": [900, 1000],
      "size": {"0": 342, "1": 202},
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": {
        "backend": "inductor",
        "fullgraph": false,
        "mode": "default",
        "dynamic": false,
        "dynamo_cache_size_limit": 64,
        "compile_transformer_blocks_only": true,
        "dynamo_recompile_limit": 128
      },
      "properties": {},
      "widgets_values": ["inductor", false, "default", false, 64, true, 128]
    },
    {
      "id": 52,
      "type": "WanVideoTeaCache",
      "pos": [1300, 1000],
      "size": {"0": 270, "1": 178},
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": {
        "rel_l1_thresh": 0.3,
        "start_step": 1,
        "end_step": -1,
        "cache_device": "offload_device",
        "use_coefficients": true,
        "mode": "e"
      },
      "properties": {},
      "widgets_values": [0.3, 1, -1, "offload_device", true, "e"]
    },
    {
      "id": 55,
      "type": "WanVideoEnhanceAVideo",
      "pos": [1700, 1000],
      "size": {"0": 277, "1": 106},
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": {
        "weight": 2.0,
        "start_percent": 0.0,
        "end_percent": 1.0
      },
      "properties": {},
      "widgets_values": [2.0, 0.0, 1.0]
    },
    {
      "id": 60,
      "type": "SaveVideo",
      "pos": [1600, 100],
      "size": {"0": 200, "1": 100},
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": {
        "video": ["VIDEO", 28],
        "filename_prefix": "wan_distributed_output"
      },
      "properties": {},
      "widgets_values": ["wan_distributed_output"]
    }
  ],
  "links": [
    [1, 1, 0, 2, 2],
    [2, 2, 0, 3, 0],
    [3, 11, 0, 3, 1],
    [4, 37, 0, 3, 2],
    [5, 3, 0, 28, 1],
    [6, 6, 0, 28, 0],
    [7, 28, 0, 60, 0],
    [8, 45, 0, 3, 8],
    [9, 39, 0, 3, 9],
    [10, 35, 0, 3, 10],
    [11, 52, 0, 3, 12],
    [12, 55, 0, 3, 11]
  ],
  "groups": [],
  "config": {},
  "extra": {},
  "version": 0.4
} 